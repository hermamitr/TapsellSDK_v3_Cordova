version: 2
jobs:
  publish:
    docker: # See https://docs.docker.com/get-started/#docker-concepts if you are new to Docker.
      - image: behdad222/android-sdk:v2.0.0
    steps:
      - checkout
      - run: pluginVersion=$(cat www/tapsell.js | grep "tapsellPluginVersion" | cut -d'=' -f2)
      - run: pluginVersion=${pluginVersion## }
      - run: pluginVersion=${pluginVersion%% }
#      - run: npm publish
#      - run: curl -XGET http://answers.tapsell.ir/wp-content/plugins/versionAutomation/updateversion.php?key=$DOC_KEY&platform=cordovaPlugin&version=$pluginVersion
      - run: pwd
      - run: ls -a
      - run: ./updatesample.sh $pluginVersion
workflows:
  version: 2
  deploy:
    jobs:
      - hold:
          type: approval
      - publish:
          requires:
            - hold

